//-----------------Sonic CD Sound Test Script-----------------//
//--------Scripted by Christian Whitehead 'The Taxman'--------//
//-------Unpacked By Rubberduckycooly's Script Unpacker-------//

// Aliases
#alias Object.Value0	:	Object.FadeValue
#alias Object.Value1	:	Object.TimeMovement

// States
#alias 0	:	DEVTIMES_SETUP
#alias 1	:	DEVTIMES_FADE_IN
#alias 2	:	DEVTIMES_CONTROLS
#alias 3	:	DEVTIMES_EXIT

// Presentation Stages
#alias 1	:	STAGE_P_MENU

// Special Stages
#alias 7	:	STAGE_S_SS8

// Players
#alias 1	:	PLAYER_TAILS

// Global SFX
#alias 19	:	SFX_G_SPECIALWARP
#alias 27	:	SFX_G_SELECT

// Stage SFX
#alias 41	:	SFX_S_EVENT

// Engine & CallBacks
#alias 2	:	MESSAGE_LOSTFOCUS

// Device Type
#alias 1	:	RETRO_MOBILE

// Game Mode Aliases
#alias 0	:	MODE_NOSAVE

// Function Declarations


sub ObjectMain
	switch Object.State
	case DEVTIMES_SETUP
		if Object.FadeValue < 8
			Object.FadeValue++
		else
			Object.FadeValue = 254
			Object.State++
		end if
		SetScreenFade(0, 0, 0, 255)
		break

	case DEVTIMES_FADE_IN
		if Object.FadeValue > 0
			SetScreenFade(0, 0, 0, Object.FadeValue)
			Object.FadeValue -= 8
		else
			Object.State++
			PlayMusic(Options.Soundtrack)
		end if
		break

	case DEVTIMES_CONTROLS
		if KeyDown[0].Down == true
			if Object.TimeMovement != -470
				Object.TimeMovement--
			end if
		else
			if KeyDown[0].Up == true
				if Object.TimeMovement != 0
					Object.TimeMovement++
				end if
			end if
		end if

		if KeyDown[0].ButtonB == true
			if Object.State == DEVTIMES_CONTROLS
				StopMusic()
				Object.State++
			end if
		end if

#platform: Mobile
		TempValue0 = Screen.CenterX
		TempValue0 -= 126
		TempValue1 = Screen.CenterX
		TempValue1 -= 66
		CheckTouchRect(TempValue0, 20, TempValue1, 72)
		if CheckResult > -1
			Object.AudioType = 0
			KeyDown[0].Up = true
			Object.HoldButtonTimer++
			if Object.HoldButtonTimer == 8
				Object.HoldButtonTimer = 0
				Object.PCMNumber--
				if Object.PCMNumber < 0
					Object.PCMNumber = 69
				end if
			end if
		end if

		CheckTouchRect(TempValue0, 134, TempValue1, 186)
		if CheckResult > -1
			Object.AudioType = 0
			KeyDown[0].Down = true
			Object.HoldButtonTimer++
			if Object.HoldButtonTimer == 8
				Object.HoldButtonTimer = 0
				Object.PCMNumber++
				if Object.PCMNumber > 69
					Object.PCMNumber = 0
				end if
			end if
		end if

		TempValue0 = Screen.CenterX
		TempValue0 += 66
		TempValue1 = Screen.CenterX
		TempValue1 += 126
		CheckTouchRect(TempValue0, 20, TempValue1, 72)
		if CheckResult > -1
			Object.AudioType = 1
			KeyDown[0].Up = true
			Object.HoldButtonTimer++
			if Object.HoldButtonTimer == 8
				Object.HoldButtonTimer = 0
				Object.DANumber--
				if Object.DANumber < 0
					Object.DANumber = 37
				end if
			end if
		end if

		CheckTouchRect(TempValue0, 134, TempValue1, 186)
		if CheckResult > -1
			Object.AudioType = 1
			KeyDown[0].Down = true
			Object.HoldButtonTimer++
			if Object.HoldButtonTimer == 8
				Object.HoldButtonTimer = 0
				Object.DANumber++
				if Object.DANumber > 37
					Object.DANumber = 0
				end if
			end if
		end if

		if Engine.Message == MESSAGE_LOSTFOCUS
			Object.ButtonTouched = 0
		end if

		TempValue0 = Screen.CenterX
		TempValue0 -= 22
		TempValue1 = Screen.CenterX
		TempValue1 += 22
		CheckTouchRect(TempValue0, 116, TempValue1, 140)
		if CheckResult > -1
			Object.ButtonTouched = 1
		else
			CheckTouchRect(0, 0, Screen.XSize, Screen.YSize)
			if CheckResult < 0
				if Object.ButtonTouched == true
					Object.ButtonTouched = false
					if Object.State == DEVTIMES_CONTROLS
						if Object.AudioType == 0
							PlaySfx(Object.PCMNumber, false)
						else
							if Object.PlayButtonCoolDown == false
								Object.PlayButtonCooldown = 60
							end if
						end if
					end if
				end if
			else
				if Object.ButtonTouched == 1
					Object.ButtonTouched = false
				end if
			end if
		end if

		CheckTouchRect(TempValue0, 148, TempValue1, 172)
		if CheckResult > -1
			Object.ButtonTouched = 2
		else
			CheckTouchRect(0, 0, Screen.XSize, Screen.YSize)
			if CheckResult < 0
				if Object.ButtonTouched == 2
					Object.ButtonTouched = 0
					StopMusic()
				end if
			else
				if Object.ButtonTouched == 2
					Object.ButtonTouched = 0
				end if
			end if
		end if

		CheckTouchRect(TempValue0, 180, TempValue1, 204)
		if CheckResult > -1
			Object.ButtonTouched = 3
		else
			CheckTouchRect(0, 0, Screen.XSize, Screen.YSize)
			if CheckResult < 0
				if Object.ButtonTouched == 3
					Object.ButtonTouched = 0
					PlaySfx(SFX_G_SELECT, false)
					Object.State++
					StopMusic()
				end if
			else
				if Object.ButtonTouched == 3
					Object.ButtonTouched = 0
				end if
			end if
		end if
#endplatform
		break

	case DEVTIMES_EXIT
		if Object.FadeValue < 288
			Object.FadeValue += 8
		else
			Stage.ActiveList = PRESENTATION_STAGE
			Stage.ListPos	 = 0
			LoadStage()
		end if
		
		TempValue0 = Object.FadeValue
		if TempValue0 > 255
			TempValue0 = 255
		end if
		SetScreenFade(0, 0, 0, TempValue0)
		break
	end switch
end sub


sub ObjectDraw
	TempValue0 = 0
	while TempValue0 < 240
		TempValue1 = 0
		while TempValue1 < Screen.XSize
			DrawSpriteScreenXY(0, TempValue1, TempValue0)
			TempValue1 += 224
		loop
		TempValue0 += 48
	loop
	TempValue2 = 5
	TempValue2 += Object.TimeMovement
	DrawSpriteScreenXY(1, Screen.CenterX, TempValue2)
end sub


sub ObjectStartup
	SetMusicTrack("JP/SpeedShoes.ogg", 0, true)
	SetMusicTrack("US/SpeedShoes.ogg", 1, true)
	LoadSpriteSheet("Secrets/DevTimes.gif")
	SpriteFrame(0, 0, 224, 48, 0, 0)			// #0 - Background
	SpriteFrame(-110, 0, 207, 685, 0, 49)			// #1  - 0
end sub


// ========================
// Editor Subs
// ========================

sub RSDKDraw
	DrawSprite(0)
end sub


sub RSDKLoad
	LoadSpriteSheet("Secrets/SecretMenus.gif")
	SpriteFrame(-40, 0, 96, 16, 136, 49)		// #0 - Sound Test

	SetVariableAlias(ALIAS_VAR_PROPVAL, "unused")
end sub
